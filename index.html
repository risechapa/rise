<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="É rapidinho, mas ajuda demais! Responda nossa pesquisa:" />
    <meta property="og:image" content="https://iili.io/3njuOJt.png" />
    <title>Pesquisa RISE</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>

<body>
    <h2>Por favor, responda à nossa pequisa de campo abaixo:</h2>
    <h3>*A pesquisa de campo não faz parte da campanha de eleição da chapa <b>RISE</b>*</h3>
    <div class="form-container">
        <form id="pesquisaCampo">
            <div class="form-group">
            <label for="ano"> <legend>1 - Em qual ano você está? <p>Obrigatório*</p></legend> </label>
               
                <select id="ano" name="ano" onchange="nonEmpty(this)">
                    <option value="select" disabled selected>Selecione...</option>
                    <option value="1ºano">1º Ano</option>
                    <option value="2º Ano">2º Ano</option>
                    <option value="3º Ano">3º Ano</option>
                </select> 

            </div>
            <div class="form-group">
                <label for="curso"><legend>2- Em qual curso você está? <p>Obrigatório*</p></legend> </label>
                <select id="curso" name="curso" onchange="nonEmpty(this)">
                    <option value="select" disabled selected>Selecione...</option>
                    <option value="Desenvolvimento de Sistemas">Desenvolvimento de Sistemas</option>
                    <option value="Logística">Logística</option>
                    <option value="Contabilidade">Contabilidade</option>
                    <option value="Química">Química</option>
                    <option value="Farmácia">Farmácia</option>
                </select>

            </div>

            <div class="form-group">

                <legend>3 - Como você avalia a importância das ações sociais promovidas pelo grêmio? <p>Obrigatório*</p> </legend>
                    
                    <div class="resposta">
                    <input type="radio" id="muitoImportante" name="acoes" value="Muito Importante" onchange="nonEmpty(this)">
                    <label for="muitoImportante"> Muito Importante</label>
                    </div> <br>

                    <div class="resposta">
                    <input type="radio" id="importante" name="acoes" value="Importante" onchange="nonEmpty(this)">
                    <label for="importante"> Importante</label>
                    </div> <br>

                    <div class="resposta">
                    <input type="radio" id="neutro" name="acoes" value="Neutro" onchange="nonEmpty(this)">
                    <label for="neutro"> Neutro</label>
                    </div> <br>

                    <div class="resposta">
                    <input type="radio" id="poucoImportante" name="acoes" value="Pouco Importante" onchange="nonEmpty(this)">
                    <label for="poucoImportante"> Pouco Importante</label>
                    </div> <br>

                    <div class="resposta">
                    <input type="radio" id="nadaImportante" name="acoes" value="Nada Importante" onchange="nonEmpty(this)">
                    <label for="nadaImportante"> Nada Importante</label>
                    </div> <br>

            </div>

            <div class="form-group">
            
                <legend>4 - Quais temas você gostaria que a próxima gestão do grêmio abordasse? (Múltipla escolha) <p>Obrigatório*</p> </legend>
                
                <div class="resposta">
                <input type="checkbox" id="educacao" name="temas" value="Educação" onchange="nonEmpty(this)">
                <label for="educacao"> Educação</label>
                </div> <br>
            
                <div class="resposta">
                <input type="checkbox" id="meioAmbiente" name="temas" value="Meio ambiente" onchange="nonEmpty(this)">
                <label for="meioAmbiente"> Meio ambiente</label>
                </div> <br>
            
                <div class="resposta">
                <input type="checkbox" id="cultura" name="temas" value="Cultura" onchange="nonEmpty(this)">
                <label for="cultura"> Cultura</label>
                </div> <br>
            
                <div class="resposta">
                <input type="checkbox" id="esporte" name="temas" value="Esporte" onchange="nonEmpty(this)">
                <label for="esporte"> Esporte</label>
                </div> <br>
                
                <div class="resposta">
                <input type="checkbox" id="saudeMental" name="temas" value="Saúde Mental" onchange="nonEmpty(this)">
                <label for="saudeMental"> Saúde Mental</label>
                </div> <br>

                <div class="resposta">
                <input type="checkbox" id="outroTemas" name="temas" value="Outro" oninput="showText(this)" onchange="nonEmpty(this)">
                <label for="outroTemas"> Outro (Especifique)</label>
                </div> <br>
                <textarea id="temasText" name="temasText" class="hidden" placeholder="Digite sua resposta"></textarea>
            
            </div>

            <div class="form-group">
                
                <legend>5 -Você se sentiria incentivado a participar mais ativamente se houvesse uma melhor comunicação das atividades do grêmio? <p>Obrigatório*</p> </legend>

                <div class="resposta">
                <input type="radio" id="simComunicacao" name="comunicacao" value="Sim" onchange="nonEmpty(this)">
                <label for="simComunicacao"> Sim</label>
                </div> <br>
            
                <div class="resposta">
                <input type="radio" id="naoComunicacao" name="comunicacao" value="Não" onchange="nonEmpty(this)">
                <label for="naoComunicacao"> Não</label>
                </div> <br>
            
            </div>

            <div class="form-group">
            
                <legend>6 - O que motivaria você a participar mais ativamente das atividades do grêmio? (Múltipla escolha)<p>Obrigatório*</p> </legend>

                <div class="resposta">
                <input type="checkbox" id="melhorDivulgacao" name="atividade" value="Melhor divulgação" onchange="nonEmpty(this)">
                <label for="melhorDivulgacao"> Melhor divulgação</label>
                </div> <br>
                
                <div class="resposta">
                <input type="checkbox" id="maiorVariedadeEventos" name="atividade" value="Maior variedade de eventos" onchange="nonEmpty(this)">
                <label for="maiorVariedadeEventos"> Maior variedade de eventos</label>
                </div> <br>


                <div class="resposta">
                <input type="checkbox" id="incentivos" name="atividade" value="Incentivos" onchange="nonEmpty(this)">
                <label for="incentivos"> Incentivos (Ex: Horas de serviço comunitário)</label>
                </div> <br>

                <div class="resposta">
                <input type="checkbox" id="outroAtividade" name="atividade" value="Outro"  oninput="showText(this)" onchange="nonEmpty(this)">
                <label for="outroAtividade"> Outro (Especifique)</label>
                </div>
                <textarea id="atividadeText" name="atividadeText" class="hidden" placeholder="Digite sua resposta"></textarea>
            
            </div>

            <div class="form-group">
            
                <legend>7 - Qual é o seu meio preferido de comunicação sobre as atividades do grêmio? <p>Obrigatório*</p> </legend>

                <div class="resposta">
                <input type="radio" id="redesSociais" name="meio" value="Redes sociais" onclick="hideTextRadio(this)" onchange="nonEmpty(this)">
                <label for="redesSociais"> Redes sociais</label>
                </div> <br>

                <div class="resposta">
                <input type="radio" id="email" name="meio" value="E-mail" onclick="hideTextRadio(this)" onchange="nonEmpty(this)">
                <label for="email"> E-mail</label>
                </div> <br>

                <div class="resposta">
                <input type="radio" id="msgApps" name="meio" value="Aplicativos de mensagens" onclick="hideTextRadio(this)" onchange="nonEmpty(this)">
                <label for="msgApps"> Aplicativos de mensagens (Ex: WhatsApp)</label>
                </div> <br>

                <div class="resposta">
                <input type="radio" id="murais" name="meio" value="Murais na escola" onclick="hideTextRadio(this)" onchange="nonEmpty(this)">
                <label for="murais"> Murais na escola</label>
                </div> <br>

                <div class="resposta">
                <input type="radio" id="outroMeio" name="meio" value="Outro" onclick="showTextRadio(this)" onchange="nonEmpty(this)">
                <label for="outroMeio"> Outro (Especifique)</label>
                </div> <br>
                <textarea id="meioText" name="meioText" class="hidden" placeholder="Digite sua resposta"></textarea>
            
            </div>

            <div class="form-group">
            
                <legend>8 - Você acha interessante a ideia de ter um baile de primavera como futuro evento, ou acredita que isso seria apenas uma perda de tempo de aula? <p>Obrigatório*</p> </legend>
                
                <div class="resposta">
                <input type="radio" id="simIdeia" name="baile" value="Sim, acho uma boa ideia" onchange="nonEmpty(this)">
                <label for="simIdeia"> Sim, acho uma boa ideia</label>
                </div> <br>
            
                <div class="resposta">
                <input type="radio" id="naoIdeia" name="baile" value="Não, seria perda do período de aula" onchange="nonEmpty(this)">
                <label for="naoIdeia"> Não, seria perda do período de aula</label>
                </div> <br>
            
            </div>

            <div class="form-group">
            
                <legend>9 - Você considera interessante a ideia de termos, uma vez por mês, uma reunião com todos os representantes para analisar
                suas necessidades e discutir propostas? Essa seria uma forma de integrar os representantes ao grêmio. <p>Obrigatório*</p> </legend>
                
                <div class="resposta">
                <input type="radio" id="simReuniao" name="reuniao" value="Sim" onchange="nonEmpty(this)">
                <label for="simReuniao"> Sim</label>
                </div> <br>
                
                <div class="resposta">
                <input type="radio" id="naoReuniao" name="reuniao" value="Não" onchange="nonEmpty(this)">
                <label for="naoReuniao"> Não</label>
                </div> <br>
            
            </div>

            <div class="form-group">
            
                <legend>10 - Quais melhorias você gostaria o grêmio fizesse na escola? <p>Obrigatório*</p> </legend>
                
                <div class="resposta">
                    <input type="checkbox" id="espacosEscola" name="melhorias" value="Melhoria em espaços da escola" onchange="nonEmpty(this)">
                    <label for="espacosEscola"> Melhoria em espaços da escola</label>
                </div> <br>
                
                <div class="resposta">
                    <input type="checkbox" id="comunicacaoAlunosProfessores" name="melhorias" value="Melhoria na comunicação entre alunos e professores" onchange="nonEmpty(this)">
                    <label for="comunicacaoAlunosProfessores" class="grande"> Melhoria na comunicação entre alunos e professores (Reuniões, sugestões, etc.)</label>
                </div> <br>
                
                <div class="resposta">
                    <input type="checkbox" id="atividadesCulturais" name="melhorias" value="Atividades culturais" onchange="nonEmpty(this)">
                    <label for="atividadesCulturais"> Atividades culturais (Exposição artística)</label>
                </div> <br>

                <div class="resposta">
                    <input type="checkbox" id="campanhasConscientizacao" name="melhorias" value="Campanhas de conscientização" onchange="nonEmpty(this)">
                    <label for="campanhasConscientizacao" class="grande"> Campanhas de conscientização (Meio ambiente, saúde mental, bullying e inclusão)</label>
                </div> <br>
                
                <div class="resposta">
                    <input type="checkbox" id="outroMelhorias" name="melhorias" value="Outro" oninput="showText(this)" onchange="nonEmpty(this)">
                    <label for="outroMelhorias"> Outro (Especifique)</label>
                </div>
                <textarea id="melhoriasText" name="melhoriasText" class="hidden" placeholder="Digite sua resposta"></textarea>
            
            </div>

            <div class="form-group">
            
                <legend>11 - Que tipo de evento você gostaria de ver promovido pelo grêmio no futuro? <p>Obrigatório*</p>
                </legend>
            
                <div class="resposta">
                    <input type="checkbox" id="festasTematicas" name="evento" value="Festas temáticas" onchange="nonEmpty(this)">
                    <label for="festasTematicas"> Festas temáticas (Festa Junina, Carnaval, Halloween)</label>
                </div> <br>
            
                <div class="resposta">
                    <input type="checkbox" id="eventosEsportivos" name="evento" value="Eventos esportivos entre turmas ou séries" onchange="nonEmpty(this)">
                    <label for="eventosEsportivos"> Eventos esportivos entre turmas ou séries</label>
                </div> <br>
            
                <div class="resposta">
                    <input type="checkbox" id="palestrasWorkshops" name="evento" value="Palestras e workshops com profissionais de diversas áreas" onchange="nonEmpty(this)">
                    <label for="palestrasWorkshops"> Palestras e workshops com profissionais de diversas áreas</label>
                </div> <br>
            
                <div class="resposta">
                    <input type="checkbox" id="concursosTalentos" name="evento" value="Concursos de talentos (Música, dança, teatro)" onchange="nonEmpty(this)">
                    <label for="concursosTalentos"> Concursos de talentos (Música, dança, teatro)</label>
                </div> <br>
            
                <div class="resposta">
                    <input type="checkbox" id="eventosIntegracao" name="evento" value="Eventos de integração" onchange="nonEmpty(this)">
                    <label for="eventosIntegracao"> Eventos de integração</label>
                </div> <br>
            
                <div class="resposta">
                    <input type="checkbox" id="outroEvento" name="evento" value="Outro" oninput="showText(this)" onchange="nonEmpty(this)">
                    <label for="outroEvento"> Outro (Especifique)</label>
                </div>
                <textarea id="eventoText" name="eventoText" class="hidden" placeholder="Digite sua resposta"></textarea>
            
            </div>

            <div class="form-group">
                <label for="acrescentar"><legend>12 - Há algo mais que você gostaria de adicionar sobre o grêmio estudantil? Alguma ideia que gostaria de compartilhar? </legend><p class="opcional">Opcional*</p> </label>
                <textarea id="acrescentar" name="acrescentar" placeholder="Digite sua resposta"></textarea>
            </div>

            <p id="aviso" class="hidden">*Por favor, preencha todos os campos obrigatórios!*</p>

            <button type="submit" id="buttonSubmit" value="submit">
                Enviar
            </button>

            <script>

                emailjs.init("UwZz4i-VJt6Xr0CCw");

                const button = document.getElementById("buttonSubmit");

                const addLoading = () => {

                    button.innerHTML = '<img src="./loading.png" class="loading">';

                }

                const removeLoading = () => {

                    button.innerHTML = 'Enviar';

                }

                document.getElementById("pesquisaCampo").addEventListener("submit", function submitTest() {

                    event.preventDefault();

                    const ano = document.getElementById("ano");
                    const curso = document.getElementById("curso");

                    const aviso = document.getElementById("aviso");

                    var allAnswered = true;

                    if (ano.value == null || ano.value == "" || ano.value == "select") {

                        event.preventDefault();

                        ano.classList.add("empty");

                        aviso.classList.remove("hidden");

                        allAnswered = false;

                    }
                    if (curso.value == null || curso.value == "" || curso.value == "select") {

                        event.preventDefault();

                        curso.classList.add("empty");

                        aviso.classList.remove("hidden");

                        allAnswered = false;

                    }

                    var questions = ["acoes", "temas", "comunicacao", "atividade", "meio", "baile", "reuniao", "melhorias", "evento"];
                    

                    for (var i = 0; i < questions.length; i++) {

                        var name = questions[i];

                        var questionAnswer = document.querySelector(`input[name="${name}"]:checked`);

                        if (questionAnswer == null || questionAnswer == "") {

                            event.preventDefault();

                            aviso.classList.remove("hidden");

                            allAnswered = false;

                            var missingList = document.querySelectorAll(`input[name="${name}"]`);

                            missingList.forEach(element => {

                                element.classList.add("empty");

                            });

                        }

                    }

                    if (allAnswered) {

                        event.preventDefault();

                        aviso.classList.add("hidden");

                        addLoading();

                        const serviceID = "service_hgmxgub";
                        const templateID = "template_9xwak81";

                        var anoValue = document.getElementById('ano').value;
                        var cursoValue = document.getElementById('curso').value;

                        var temasValueText = document.getElementById('temasText').value;
                        var atividadeValueText = document.getElementById('atividadeText').value;
                        var meioValueText = document.getElementById('meioText').value;
                        var melhoriasValueText = document.getElementById('melhoriasText').value;
                        var eventoValueText = document.getElementById('eventoText').value;

                        var acrescentarValue = document.getElementById('acrescentar').value;

                        var valores = [];

                        for (var i = 0; i < questions.length; i++) {
                            
                            var name = questions[i];
                            
                            var radios = document.querySelectorAll(`input[type="radio"][name="${name}"]`);
                            radios.forEach(radio => {
                                if (radio.checked) {
                                    valores.push(radio.id);
                                }
                            });
                            
                            var valoresCheckbox = [];
                            var checkboxes = document.querySelectorAll(`input[type="checkbox"][name="${name}"]`);
                            checkboxes.forEach(checkbox => {
                                if (checkbox.checked) {
                                    valoresCheckbox.push(checkbox.id);
                                }
                            });

                            if (valoresCheckbox.length > 0) {
                                valores.push(valoresCheckbox);
                            }

                        }

                        var [acoes, temas, comunicacao, atividade, meio, baile, reuniao, melhorias, evento] = valores;

                        emailjs.sendForm(serviceID, templateID, this)
                            .then(function (response) {
                                console.log('SUCCESS!', response.status, response.text);

                                fetch('https://api.sheetmonkey.io/form/beUKu7g9tvTGPUARMXMRQX', {

                                    method: 'post',
                                    headers: {
                                        'Accept': 'application/json',
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({ Questão1: anoValue, Questão2: cursoValue, Questão3: acoes, Questão4: temas, Questão4Texto: temasValueText, Questão5: comunicacao, Questão6: atividade, Questão6Texto: atividadeValueText, Questão7: meio, Questão7Texto: meioValueText, Questão8: baile, Questão9: reuniao, Questão10: melhorias, Questão10Texto: melhoriasValueText, Questão11: evento, Questão11Texto: eventoValueText, Questão12Texto: acrescentarValue }),

                                });

                            }, function (error) {
                                console.log('FAILED...', error);
                            })
                                .then(function redirect() {

                                    removeLoadin();

                                    setTimeout(function () {
                                        window.location.href = 'rise.html';
                                    }, 50);

                                });
                    
                    }

                });

                function nonEmpty(element) {

                    var name = element.name;

                    var elements = new Array;

                    elements = document.getElementsByName(name);

                    elements.forEach(element => {

                        element.classList.remove("empty");

                    });                    

                }

                function showText(element) {

                    const inputName = element.name;

                    const textArea = document.getElementById(inputName + "Text");

                    textArea.classList.toggle("hidden");

                }

                function showTextRadio(element) {

                    const inputName = element.name;

                    const textArea = document.getElementById(inputName + "Text");

                    var textClass = textArea.getAttribute("class");

                    if (textClass == "hidden") {

                        textArea.classList.remove("hidden");

                    }

                }

                function hideTextRadio(element) {

                    const inputName = element.name;

                    const textArea = document.getElementById(inputName + "Text");

                    var textClass = textArea.getAttribute("class");

                    if (textClass != "hidden") {

                        textArea.classList.add("hidden");

                    }

                }

            </script>
        </form>
    </div>
</body>
</html>
